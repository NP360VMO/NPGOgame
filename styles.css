
/* ============================================================
   NP Spirits — Unified Stylesheet (v1.0)
   - Themes: sky | grass | warm | dimsum | boba
   - Layout: layout-intro-knowledge-actions
   - Mobile-first with clamp() for fluid typography
   ============================================================ */

/* ---------- Base tokens (fallback) ---------- */
:root {
  --bg: #f7f7f7;
  --card: #ffffff;
  --ink: #1f2a44;
  --accent: #4f46e5;
  --accent-ink: #142042;
  --badge-bg: #f4f6f8;
  --badge-border: #e6ebf0;
  --section-bg: #f8fafc;
  --section-border: #e5eaf0;
}

* { box-sizing: border-box; }
html { font-size: 16px; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "PingFang TC", "Noto Sans CJK TC", Arial, sans-serif;
  color: var(--ink);
  background: var(--bg);
  margin: 0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ---------- Container & Card ---------- */
.container { max-width: 980px; margin: 0 auto; padding: 24px 16px 56px; }
.card {
  background: var(--card);
  border-radius: 16px;
  box-shadow: 0 8px 30px rgba(0,0,0,.08);
  padding: clamp(16px, 2.5vw, 28px);
}

/* ---------- Header ---------- */
.header { display: flex; align-items: center; gap: 12px; justify-content: center; margin-bottom: 12px; flex-wrap: wrap; }
.title { font-size: clamp(20px, 3.2vw, 28px); font-weight: 800; letter-spacing: .3px; text-align: center; }
.badge {
  font-size: clamp(12px, 2.4vw, 14px);
  background: var(--badge-bg);
  color: var(--accent-ink);
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--badge-border);
}

/* ---------- HERO (image + intro) ---------- */
.hero {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
  align-items: center;
  margin-top: 8px;
}
@media (min-width: 768px) { .hero { grid-template-columns: 360px 1fr; } }
.img-wrap { display: grid; place-items: center; }
.img-wrap img { width: clamp(160px, 30vw, 260px); max-width: 90%; height: auto; filter: drop-shadow(0 14px 24px rgba(0,0,0,.15)); }

/* ---------- Typography ---------- */
p { margin: 0 0 10px; line-height: 1.75; font-size: clamp(14px, 2.4vw, 16px); }
.section h3 { margin: 0 0 10px; font-size: clamp(16px, 2.6vw, 18px); display: flex; align-items: center; gap: 8px; }
.section h3::before {
  content: "📘";
  font-size: 1em;
  line-height: 1;
  display: inline-block;
  transform: translateY(1px);
}
.section h3[data-icon="check"]::before { content: "✅"; }
.section h3[data-icon="ban"]::before { content: "🚫"; }

/* ---------- Sections & Grid ---------- */
.section {
  background: var(--section-bg);
  border: 1px solid var(--section-border);
  border-radius: 12px;
  padding: 14px 16px;
}
.grid { display: grid; grid-template-columns: 1fr; gap: 14px; margin-top: 16px; }
@media (min-width: 768px) { .grid { grid-template-columns: 1fr 1fr; gap: 18px; } }
ul { margin: 0; padding-left: 20px; }
ul li { margin: 6px 0; line-height: 1.7; font-size: clamp(14px, 2.4vw, 16px); }

/* ---------- Layout: Intro → Knowledge → Other ---------- */
.layout-intro-knowledge-actions .intro { margin: 0; }
.layout-intro-knowledge-actions .section.knowledge { margin-top: 14px; }
.layout-intro-knowledge-actions .grid { margin-top: 16px; }
/* Safety: if knowledge is mistakenly placed inside grid, force full-width */
.grid .section.knowledge { grid-column: 1 / -1; }

/* ---------- Actions & Footer ---------- */
.actions { display: flex; justify-content: center; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
.btn {
  appearance: none; border: none; background: var(--accent); color: #fff;
  font-weight: 800; padding: 12px 18px; border-radius: 12px; cursor: pointer;
  font-size: clamp(14px, 2.6vw, 16px);
  box-shadow: 0 6px 0 rgba(0,0,0,.12), 0 10px 22px rgba(0,0,0,.12);
  transition: transform .06s ease, box-shadow .2s ease, opacity .2s ease;
  text-decoration: none; display: inline-flex; align-items: center; gap: 6px;
}
.btn.secondary { background: transparent; color: var(--accent-ink); border: 2px solid var(--accent); }
.btn:hover { transform: translateY(-1px); box-shadow: 0 7px 0 rgba(0,0,0,.18), 0 14px 26px rgba(0,0,0,.16); }
.btn:active { transform: translateY(2px); box-shadow: 0 3px 0 rgba(0,0,0,.18), 0 8px 18px rgba(0,0,0,.18); }
.btn:disabled { opacity: .6; cursor: not-allowed; }
#message { text-align: center; margin-top: 10px; font-weight: 600; color: #0d6a2f; font-size: clamp(14px, 2.4vw, 16px); }

.footer { text-align: center; margin-top: 22px; }
.footer a { color: var(--accent-ink); text-decoration: none; font-weight: 700; border-bottom: 1px dashed var(--badge-border); font-size: clamp(14px, 2.4vw, 16px); }

/* ---------- Ultra-small devices (<= 360px) ---------- */
@media (max-width: 360px) {
  .container { padding: 16px 10px 40px; }
  .card { border-radius: 12px; }
  .actions { gap: 8px; }
  .btn { padding: 10px 14px; border-radius: 10px; }
  .img-wrap img { width: clamp(150px, 65vw, 220px); }
}

/* ============================================================
   THEMES
   ============================================================ */

/* Theme: Sky (Cable Car series) */
.theme-sky {
  --bg: #eaf6ff;
  --card: #ffffff;
  --ink: #1f2a44;
  --accent: #56aaff;
  --accent-ink: #0e3a66;
  --badge-bg: #f2f8ff;
  --badge-border: #cfe7ff;
  --section-bg: #f7fbff;
  --section-border: #e5f2ff;
}

/* Theme: Grass (Little Yellow) */
.theme-grass {
  --bg: #fffbe6;
  --card: #ffffff;
  --ink: #3d2b00;
  --accent: #7bc043;
  --accent-ink: #1f3f0b;
  --badge-bg: #fbfff4;
  --badge-border: #cbe9a7;
  --section-bg: #fbfff4;
  --section-border: #e2f3cc;
}

/* Theme: Warm (Yellow Cow) */
.theme-warm {
  --bg: #fff7e6;
  --card: #ffffff;
  --ink: #3d2b00;
  --accent: #f0c419;
  --accent-ink: #4a3a00;
  --badge-bg: #fff9ec;
  --badge-border: #ffe28a;
  --section-bg: #fff9ec;
  --section-border: #ffe7b3;
}

/* Theme: Dim Sum (Tea orange + brown) */
.theme-dimsum {
  --bg: #fff2e6;
  --card: #ffffff;
  --ink: #5a3e2b;
  --accent: #ffa24c;
  --accent-ink: #6b3510;
  --badge-bg: #fff7ef;
  --badge-border: #ffd3ad;
  --section-bg: #fff7ef;
  --section-border: #ffe3cc;
}

/* Theme: Boba (Milk tea + golden) */
.theme-boba {
  --bg: #f7efe7;
  --card: #ffffff;
  --ink: #4b382b;
  --accent: #c69c6d;
  --accent-ink: #5a3f2a;
  --badge-bg: #fbf6f0;
  --badge-border: #e4d2bf;
  --section-bg: #fbf6f0;
  --section-border: #ecdcc8;
  
  /* ============================================================
   挑戰遊戲統一風格
   ============================================================ */

/* 遊戲容器 */
.game-container {
  background: var(--card);
  border: 1px solid var(--section-border);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
  margin: 20px auto;
  max-width: 800px;
}

/* 遊戲標題 */
.game-title {
  font-size: clamp(24px, 4vw, 32px);
  font-weight: 900;
  color: var(--accent-ink);
  text-align: center;
  margin-bottom: 10px;
  position: relative;
}

.game-title::after {
  content: "";
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 4px;
  background: var(--accent);
  border-radius: 2px;
}

/* 遊戲說明 */
.game-description {
  font-size: clamp(15px, 3vw, 18px);
  color: var(--ink);
  text-align: center;
  margin-bottom: 20px;
  line-height: 1.6;
}

/* 遊戲狀態欄 */
.game-status {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 15px 0;
  flex-wrap: wrap;
}

.game-status-item {
  background: var(--section-bg);
  border: 1px solid var(--section-border);
  border-radius: 20px;
  padding: 8px 16px;
  font-weight: 700;
  font-size: clamp(14px, 3vw, 16px);
}

/* 遊戲按鈕 */
.game-btn {
  padding: 12px 24px;
  font-size: clamp(15px, 3vw, 18px);
  font-weight: 800;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.game-btn-primary {
  background: var(--accent);
  color: white;
  border: none;
  box-shadow: 0 4px 12px rgba(var(--accent-rgb), 0.3);
}

.game-btn-primary:hover {
  background: var(--accent-dark);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(var(--accent-rgb), 0.4);
}

.game-btn-secondary {
  background: transparent;
  color: var(--accent-ink);
  border: 2px solid var(--accent);
}

.game-btn-secondary:hover {
  background: rgba(var(--accent-rgb), 0.1);
}

/* 遊戲畫布/區域 */
.game-canvas {
  background: var(--section-bg);
  border: 1px solid var(--section-border);
  border-radius: 12px;
  margin: 0 auto;
  display: block;
  max-width: 100%;
}

/* 遊戲控制區 */
.game-controls {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
  flex-wrap: wrap;
}

/* 虛擬控制按鈕 */
.virtual-controls {
  display: flex;
  justify-content: center;
  margin-top: 20px;
  flex-direction: column;
  align-items: center;
}

.control-row {
  display: flex;
  justify-content: center;
}

.control-btn {
  width: 60px;
  height: 60px;
  background-color: rgba(var(--accent-rgb), 0.2);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 5px;
  font-size: 24px;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  transition: background 0.2s;
}

.control-btn:active {
  background-color: rgba(var(--accent-rgb), 0.4);
}

/* 響應式調整 */
@media (max-width: 600px) {
  .game-container {
    padding: 15px;
  }
  
  .control-btn {
    width: 50px;
    height: 50px;
    font-size: 20px;
  }
}

@media (max-width: 400px) {
  .game-status {
    gap: 8px;
  }
  
  .game-status-item {
    padding: 6px 12px;
  }
  
  .game-controls {
    gap: 8px;
  }
  
  .game-btn {
    padding: 10px 16px;
  }
}
}
